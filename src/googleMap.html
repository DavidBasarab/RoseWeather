<!DOCTYPE html>
<html>
	<head>
		<title>Overlaying an image map type</title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<meta charset="utf-8">
		<style>
			.img-container { position: relative; }

			.img-container .top {
				position: absolute;
				top: 0;
				left: 0;
				z-index: 1;
			}
		</style>

		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyDxuhw4SRRQogAUwWZV2-PLwNqKHggOKpE"></script>
	</head>
	<body>
		<script>
            var MERCATOR_RANGE = 256;

            function bound(value, opt_min, opt_max) {
                if (opt_min != null) value = Math.max(value, opt_min);
                if (opt_max != null) value = Math.min(value, opt_max);
                return value;
            }

            function degreesToRadians(deg) {
                return deg * (Math.PI / 180);
            }

            function radiansToDegrees(rad) {
                return rad / (Math.PI / 180);
            }

            function MercatorProjection() {
                this.pixelOrigin_ = new google.maps.Point( MERCATOR_RANGE / 2, MERCATOR_RANGE / 2);
                this.pixelsPerLonDegree_ = MERCATOR_RANGE / 360;
                this.pixelsPerLonRadian_ = MERCATOR_RANGE / (2 * Math.PI);
            };

            MercatorProjection.prototype.fromLatLngToPoint = function(latLng, opt_point) {
                var me = this;

                var point = opt_point || new google.maps.Point(0, 0);

                var origin = me.pixelOrigin_;
                point.x = origin.x + latLng.lng() * me.pixelsPerLonDegree_;
                // NOTE(appleton): Truncating to 0.9999 effectively limits latitude to
                // 89.189.  This is about a third of a tile past the edge of the world tile.
                var siny = bound(Math.sin(degreesToRadians(latLng.lat())), -0.9999, 0.9999);
                point.y = origin.y + 0.5 * Math.log((1 + siny) / (1 - siny)) * -me.pixelsPerLonRadian_;
                return point;
            };

            MercatorProjection.prototype.fromPointToLatLng = function(point) {
                var me = this;

                var origin = me.pixelOrigin_;
                var lng = (point.x - origin.x) / me.pixelsPerLonDegree_;
                var latRadians = (point.y - origin.y) / -me.pixelsPerLonRadian_;
                var lat = radiansToDegrees(2 * Math.atan(Math.exp(latRadians)) - Math.PI / 2);
                return new google.maps.LatLng(lat, lng);
            };

            //pixelCoordinate = worldCoordinate * Math.pow(2,zoomLevel)

            function getCorners(center,zoom,mapWidth,mapHeight){
                var scale = Math.pow(2,zoom);

                var centerPx = proj.fromLatLngToPoint(center);

                var SWPoint = {x: (centerPx.x -(mapWidth/2)/ scale) , y: (centerPx.y + (mapHeight/2)/ scale)};

                var SWLatLon = proj.fromPointToLatLng(SWPoint);

                console.log('SW: ' + SWLatLon);

                var NEPoint = {x: (centerPx.x +(mapWidth/2)/ scale) , y: (centerPx.y - (mapHeight/2)/ scale)};

                var NELatLon = proj.fromPointToLatLng(NEPoint);

                console.log(' NE: '+ NELatLon);

                return {
                    NELatLon : NELatLon,
                    SWLatLon : SWLatLon
				}
            }

            var proj = new MercatorProjection();
            var G = google.maps;
            var centerPoint = new G.LatLng(33.365736, -84.432969);
            var zoom = 10;
            var width = 933;
            var height = 840;

            var corners = getCorners(centerPoint,zoom,933,840);

            console.log(JSON.stringify(corners));

            var goolgeUrl = 'http://maps.googleapis.com/maps/api/staticmap?center=33.365736,-84.432969&zoom=' + zoom + '&size=' + width + 'x' + height +'&maptype=roadmap&key=AIzaSyDxuhw4SRRQogAUwWZV2-PLwNqKHggOKpE&markers=color:red|size:small|33.365736,-84.432969';

			console.log(goolgeUrl);

			var radarUrl = 'http://api.wunderground.com/api/0b7c673843d8c122/animatedradar/lang:EN/image.gif?maxlat=' + corners.NELatLon.lat + '&maxlon=' + corners.NELatLon.lng + '&minlat=33.846114506723005&minlon=-83.79232874121095&width=933&height=840&newmaps=0&reproj.automerc=1&num=5&delay=25&timelabel=1&timelabel.y=10&rainsnow=1&smooth=1&radar_bitmap=1&xnoclutter=1&xnoclutter_mask=1&cors=1';


		</script>
		<div class="img-container">
			<img id="overlay"  style="width: 500px; height: 500px;" class="top" src="http://api.wunderground.com/api/0b7c673843d8c122/animatedradar/lang:EN/image.gif?maxlat=32.882690536999725&maxlon=-85.07360925878908&minlat=33.846114506723005&minlon=-83.79232874121095&width=933&height=840&newmaps=0&reproj.automerc=1&num=5&delay=25&timelabel=1&timelabel.y=10&rainsnow=1&smooth=1&radar_bitmap=1&xnoclutter=1&xnoclutter_mask=1&cors=1" alt="">
			<img id="map"  style="width: 500px; height: 500px;" class="bottom" src="http://maps.googleapis.com/maps/api/staticmap?center=33.365736,-84.432969&zoom=10&size=933x840&maptype=roadmap&key=AIzaSyDxuhw4SRRQogAUwWZV2-PLwNqKHggOKpE&markers=color:red|size:small|33.365736,-84.432969" alt="">

		</div>
	</body>
</html>